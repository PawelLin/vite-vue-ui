(function(h,l){typeof exports=="object"&&typeof module!="undefined"?l(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],l):(h=typeof globalThis!="undefined"?globalThis:h||self,l(h["vue3-pawel-ui"]={},h.Vue))})(this,function(h,l){"use strict";const E=()=>/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent),$=e=>!!(e||e===0);function N(e,r){const o=l.ref(""),g=l.computed(()=>o.value||($(e.modelValue)?`${e.modelValue}`:"")),f=8,d=()=>`${Array.from(Array(e.integer||f)).fill(9).join("")}${e.decimal?`.${Array.from(Array(e.decimal)).fill(9).join("")}`:""}`,m=t=>{if(t==="-")return!0;const n=Number(e.max||d());return Number(t)===n?t===`${n}`:Number(t)<=n},y=t=>{if(t==="-")return!0;const n=Number(e.min||`-${d()}`);return Number(t)===n?t===`${n}`:Number(t)>=n},V=l.computed(()=>{const{integer:t=f,decimal:n}=e,a=`${Math.abs(e.max||0)}`.split(".")[0].length,p=`${Math.abs(e.min||0)}`.split(".")[0].length,x=Math.max(a,p,t)-1,w=n?`^-?(0|[1-9]\\d{0,${x}})?(\\.\\d{0,${n}})?$`:`^-?(0|[1-9]\\d{0,${x}})?$`;return new RegExp(w)}),v=E();let s=0;const u=t=>{t.target.setSelectionRange(s,s)};return{onInput:t=>{const n=t.target,a=e.modelValue,{value:p,selectionEnd:x}=n;p&&!(V.value.test(p)&&m(p)&&y(p))?n.value=o.value||($(a)?`${a}`:""):s=x||0,!v&&u(t),r("update:modelValue",o.value=n.value),r("onInput",o.value)},onBlur:t=>{const n=t.target.value;if(n){const a=Number(n);r("update:modelValue",o.value=$(a)?`${a}`:"")}r("onBlur",o.value)},onKeyup:t=>{v&&u(t)},onKeydown:t=>{s=t.target.selectionEnd||0},value:g}}const S={phone:{maxlength:13,onFormat:e=>e.replace(/^(\d{3})(?=\d)/g,"$1 ").replace(/(\d{4})(?=\d)/g,"$1 ")},bankCard:{maxlength:23,onFormat:e=>e.replace(/(\d{4})(?=\d)/g,"$1 ")},idCard:{maxlength:21,onFormat:e=>e.replace(/^(\d{6})(\d{4})?(\d{4})?(\w{4})?/g,"$1 $2 $3 $4").replace(/\s+/g," ").replace(/\s$/,"")}};function F(e,r){const o=l.computed(()=>S[e.format].maxlength),g=l.computed(()=>S[e.format].onFormat),f=l.computed(()=>g.value(e.modelValue)),d=E();let m=0;const y=u=>{u.target.setSelectionRange(m,m)};return{onInput:u=>{const i=u.target,{modelValue:c,format:K}=e,b=g.value(c);let{value:t,selectionEnd:n}=i;n=n||0;let a=t.replace(/[^\d]/g,"");const p=t.replace(/\s/g,""),x=t&&t[t.length-1].toUpperCase(),w=t.length>b.length;if(K==="idCard"&&n===o.value&&x==="X")a+=x,t=g.value(a),m=n;else if(w&&a!==p)a=$(c)?`${c}`:"",t=b;else{if(!w&&c===p)a=(b.substr(0,n-1)+b.substr(n,b.length)).replace(/[^\d]/g,""),t=g.value(a),n-=1;else{t=g.value(a);const M=t.substring(n-1,n);t.length>b.length?n+=M===" "?1:0:n-=M===" "?1:0}m=n}i.value=t,!d&&y(u),r("update:modelValue",a),r("onInput",a,t)},onKeyup:u=>{d&&y(u)},onKeydown:u=>{m=u.target.selectionEnd||0},value:f,maxlength:o}}function j(e,r){const o=l.ref(""),g=l.computed(()=>o.value||($(e.modelValue)?`${e.modelValue}`:"")),f=E();let d=0;const m=s=>{s.target.setSelectionRange(d,d)};return{onInput:s=>{const u=s.target,i=e.modelValue,{value:c,selectionEnd:K}=u;c&&!(!e.regExp||e.regExp.test(c))?u.value=$(i)?`${i}`:"":d=K||0,!f&&m(s),r("update:modelValue",o.value=u.value),r("onInput",o.value)},onKeyup:s=>{f&&m(s)},onKeydown:s=>{d=s.target.selectionEnd||0},value:g,maxlength:e.maxlength}}const C=["value","inputmode","maxlength","placeholder"],I=l.defineComponent({__name:"component",props:{modelValue:null,type:null,maxlength:null,integer:null,decimal:null,max:null,min:null,format:null,regExp:null,placeholder:null},emits:["update:modelValue","onInput","onBlur"],setup(e,{emit:r}){const o=e,g=l.computed(()=>o.type==="number"||o.format?"numeric":"text"),f=()=>{let u;return o.format?u=F(o,r):o.type==="number"?u=N(o,r):u=j(o,r),u},{onInput:d,onBlur:m,onKeyup:y,onKeydown:V,value:v,maxlength:s}=f();return(u,i)=>(l.openBlock(),l.createElementBlock("input",{value:l.unref(v),onInput:i[0]||(i[0]=(...c)=>l.unref(d)&&l.unref(d)(...c)),onBlur:i[1]||(i[1]=(...c)=>l.unref(m)&&l.unref(m)(...c)),onKeyup:i[2]||(i[2]=(...c)=>l.unref(y)&&l.unref(y)(...c)),onKeydown:i[3]||(i[3]=(...c)=>l.unref(V)&&l.unref(V)(...c)),type:"text",inputmode:l.unref(g),maxlength:l.unref(s),placeholder:e.placeholder},null,40,C))}});I.install=function(e){return e.component("PwInput",I),e};var B=Object.freeze(Object.defineProperty({__proto__:null,PwInput:I},Symbol.toStringTag,{value:"Module"})),P={install(e){return Object.keys(B).forEach(r=>{const o=B[r];o.install&&o.install(e)}),e}};h.PwInput=I,h.default=P,Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
